/* ====== FULL PAGE BACKGROUND IMAGE ====== */
body{
  background-image: url("https://png.pngtree.com/thumb_back/fw800/background/20241217/pngtree-a-colorful-salad-bowl-featuring-spinach-cherry-tomatoes-cucumbers-chickpeas-and-image_16817283.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  margin:0;
  background-color:#343541;
  color:#ECECF1;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:rgba(0,0,0,0.20); /* 0.20 = lighter overlay for freshness */
  z-index:-1;
}

/* ========================================================== */
/* ====== YOUR ORIGINAL STYLES BELOW (UNCHANGED) ============ */
/* ========================================================== */

:root{
  --bg:#343541;
  --panel:#40414F;
  --panel-2:#3b3c49;
  --input:#2F3136;
  --border:#565869;
  --text:#ECECF1;
  --muted:#C7C9D1;
  --chip:#2b2c34;
  --accent:#6b6ef9;
}

*{box-sizing:border-box}
html,body{height:100%}

/* Utility */
[hidden]{display:none !important}

.wrap{min-height:100%; display:grid; place-items:center; padding:28px 14px}

/* Card container (slightly translucent so background shows) */
.card{
  width:min(1100px,100%);
  background:rgba(64,65,79,0.6);
  border:1px solid var(--border);
  border-radius:8px;
  padding:18px;
  backdrop-filter:blur(8px);
  -webkit-backdrop-filter:blur(8px);
}

.card__header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:0 2px 10px; border-bottom:1px solid var(--border);
}
.pill{
  display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px;
  border:1px solid var(--border); background:transparent; color:var(--text);
  font-size:12px; font-weight:700; letter-spacing:.2px;
}
.title-link{
  background:none; border:none; padding:0; color:inherit; font:inherit; font-size:24px; font-weight:700; letter-spacing:.2px; cursor:pointer;
}
.title-link:hover{opacity:.92}

/* --- Form Grid --- */
.form{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; padding:12px 2px 8px}
.field{display:flex; flex-direction:column; gap:6px}
.field--span2{grid-column:1 / -1}
label span{font-size:12px; color:var(--muted)}

input,select{
  width:100%; padding:12px 14px; border-radius:12px; background:var(--input); color:var(--text);
  border:1px solid var(--border); outline:none; min-height:44px;
  font-size:16px;
}
input::placeholder{color:#9ea2ad}
input:focus,select:focus{box-shadow:0 0 0 2px rgba(255,255,255,.06)}

.actions{display:flex; align-items:center; gap:10px; margin-top:2px}
.btn{
  appearance:none; border:none; cursor:pointer; padding:12px 18px; border-radius:12px;
  background:#565869; color:#fff; font-weight:800; letter-spacing:.2px; transition:filter .15s ease, transform .05s ease;
  min-height:44px;
}
.btn:hover{filter:brightness(1.06)}
.btn:active{transform:translateY(1px)}
.status{color:#ffcccc; font-size:12px; display:none}
.status.show{display:inline}

/* --- Desktop table results --- */
.results{padding:8px 0 4px; overflow:auto}
table{border-collapse:collapse; width:100%; min-width:920px}
th,td{vertical-align:top; padding:10px; border-bottom:1px solid var(--border)}
th{ text-align:left; font-size:12px; color:#e4e5ea; position:sticky; top:0; background:rgba(64,65,79,0.8)}
td{ font-size:14px}
td:first-child{ font-weight:700}
.recipe{ width:100%; height:auto; border-radius:8px; border:1px solid var(--border); display:block; margin:8px 0 }

/* --- Reusable macro chips --- */
.macros{ display:flex; flex-wrap:wrap; gap:8px; margin:4px 0 8px}
.chip{ display:inline-flex; align-items:center; gap:6px; background:var(--chip); border:1px solid var(--border); padding:4px 10px; border-radius:999px; font-size:12px; color:#e7e8ec}
.chip__dot{ width:6px; height:6px; border-radius:50%; background:#9aa0aa}

/* utility */
.hidden { display: none !important; }

/* PDF action bar */
.pdf-bar {
  margin: 12px 2px 0;
  pointer-events: auto;
  z-index: 50;
}

@media (max-width: 820px){
  .pdf-bar {
    position: sticky;
    bottom: 8px;
    z-index: 50;
    padding: 8px 0;
    background: linear-gradient(180deg, rgba(52,53,65,0) 0%, rgba(52,53,65,0.85) 30%, rgba(52,53,65,1) 100%);
    backdrop-filter: blur(2px);
  }
}

.pdf-bar .btn { pointer-events: auto; }

@media (max-width: 820px){
  .pdf-bar {
    position: sticky;
    bottom: 8px;
    z-index: 20;
    padding: 8px 0;
    background: linear-gradient(180deg, rgba(52,53,65,0) 0%, rgba(52,53,65,0.85) 30%, rgba(52,53,65,1) 100%);
    backdrop-filter: blur(2px);
  }
}

/* don't print the button */
@media print {
  .no-print { display: none !important; }
}

/* --- Mobile layout --- */
@media (max-width:820px){
  html,body{font-size:16px}
  .form{grid-template-columns:1fr}
  .card__header{flex-direction:column; align-items:flex-start; gap:8px}
  .pill{align-self:flex-start; position:sticky; top:6px; z-index:2}

  .actions{
    position:sticky; bottom:8px; padding:8px; border-radius:12px;
    background:linear-gradient(180deg, rgba(64,65,79,.2), rgba(64,65,79,.8));
    backdrop-filter:saturate(140%) blur(4px);
    z-index:5;
  }

  .results{display:none}
  .mobile-results{display:block; padding:8px 0 12px}
}

/* Day tabs */
.day-tabs{
  display:flex; gap:8px; overflow:auto; padding:8px 2px 0; margin-top:2px;
  border-top:1px solid var(--border);
}
.day-tab{
  flex:0 0 auto; padding:8px 12px; border-radius:999px; border:1px solid var(--border);
  color:var(--text); background:var(--chip); font-weight:700; font-size:13px; cursor:pointer;
}
.day-tab.is-active{
  background:var(--accent); border-color:transparent; color:#fff;
}

/* Meal cards */
.mobile-results .day-section{display:grid; gap:12px; margin-top:12px}
.meal-card{
  border:1px solid var(--border); border-radius:12px; padding:10px; background:rgba(255,255,255,.02);
}
.meal-card__header{
  display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:6px;
}
.meal-card__title{
  font-weight:800; font-size:16px; line-height:1.2;
}
.meal-card__link{color:#fff; text-decoration:none}
.meal-card__meta{font-size:12px; color:#e5e7eb}

.meal-card__img{
  width:100%; aspect-ratio:4/3; object-fit:cover;
  display:block; border-radius:10px; border:1px solid var(--border); margin:6px 0 8px;
}

.meal-card ul{margin:6px 0 0 18px; padding:0}
.meal-card li{margin:2px 0}

/* ============================= */
/*     PRINT — UPDATED BLOCK     */
/* ============================= */

@page {
  size: A4 landscape;
  margin: 10mm;
}

@media print{
  * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  html, body { height:auto; background:#fff !important; color:#000 !important; }
  .wrap{ display:block; padding:0 }
  .card{
    border:none; width:auto;
    background:#fff !important;
  }

  .form, .day-tabs, .mobile-results, .actions, .title-link, .no-print { display:none !important }
  .results{ display:block !important; overflow:visible !important }

  table{ min-width:0 !important; width:100% !important; table-layout:auto; }
  th, td { font-size:11px; color:#000 !important; }
  th{
    position: static !important;
    top: auto !important;
    background:#fff !important;
  }

  tr, td, img.recipe { page-break-inside: avoid; }
  tbody { page-break-inside: auto; }

  .chip{ border-color:#999 }
  .chip__dot{ background:#666 }
  .pill{position:static; color:#000; border-color:#ccc}
}

/* ============================= */
/*     MOBILE BACKGROUND FIX     */
/* ============================= */
@media (max-width: 820px) {
  body {
    background-attachment: scroll !important;
    background-position: center top !important;
    background-size: 100% auto !important;     /* full width */
    background-repeat: repeat-y !important;    /* repeat vertically to fill long pages */
  }

  body::before {
    background: rgba(0,0,0,0.34) !important; /* slightly darker overlay for readability */
  }

  .card {
    background: rgba(64,65,79,0.45) !important;
    backdrop-filter: blur(6px) !important;
    -webkit-backdrop-filter: blur(6px) !important;
  }

  .wrap {
    padding: 16px 10px !important;
  }
}

/* =========== MOBILE BACKGROUND ALIGNMENT =========== */
@media (max-width: 820px){
  body{
    background-attachment: scroll !important;
    background-position: center 22% !important; /* Adjust focal point slightly down */
    background-size: 105% auto !important;      /* gentle zoom */
    background-repeat: repeat-y !important;     /* ensures full scroll coverage */
  }
}

/* ===================================================== */
/* ====== APPEND-ONLY: PRINT TWEAKS FOR PHONE STACK ===== */
/* ===================================================== */

/* Always show dish names in print and remove white link color */
@media print {
  a, .meal-card__link { color:#000 !important; text-decoration:none !important; }
}

/* Hide ingredients everywhere in print (desktop table & mobile views) */
@media print {
  #results ul, .day-section ul, #print-stack ul { display:none !important; }
}

/* Phone “day-per-page” stack (built by JS) */
@media print {
  /* Only has effect when the JS adds #print-stack for mobile */
  #print-stack { display:block !important; width:100%; }

  /* Each day is its own page */
  #print-stack .print-day{
    page-break-after: always;
    break-after: page;
    padding:8px 0 12px;
  }
  #print-stack .print-day:last-of-type{
    page-break-after: avoid;
    break-after: avoid-page;
  }

  /* Day heading */
  #print-stack .print-day__heading{
    font-size:16px; font-weight:800; margin:0 0 6px; color:#000;
  }

  /* Meal cards on phone print */
  .print-card{ margin:8px 0 14px; }
  .print-card__img{
    width:100%; height:auto; max-height:280px; object-fit:cover; display:block;
    border:1px solid #ddd; border-radius:6px;
  }
  .print-card__title{ font-weight:700; font-size:14px; margin:6px 0 2px; color:#000; }
  .print-card__meta{ font-size:12px; opacity:.85; margin-bottom:4px; color:#000; }
  .print-card__macros .chip{
    font-size:11px; margin-right:6px; border-color:#bbb; color:#000;
  }

  /* Footer should appear once at the end of the stack */
  .print-footer{
    display:block; margin-top:8px; text-align:center; font-size:12px; opacity:.85; color:#000;
  }
  .print-footer__dm{ display:block; margin-top:2px; }
}

/* ============================== */
/* APPEND-ONLY: kcal/time as chip */
/* ============================== */

/* Desktop table: the kcal/time div is the second <div> inside each <td> */
#results td > div:nth-of-type(2){
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:var(--chip);
  border:1px solid var(--border);
  border-radius:999px;
  padding:4px 10px;
  color:#e7e8ec !important;
  font-size:12px !important;
  line-height:1.3;
  margin:6px 0 6px;
  width: fit-content;
}

/* Give it the same little dot as other chips */
#results td > div:nth-of-type(2)::before{
  content:"";
  width:6px; height:6px; border-radius:50%;
  background:#9aa0aa; display:inline-block;
}

/* Mobile cards: make the meta line a chip too */
.meal-card__meta{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:var(--chip);
  border:1px solid var(--border);
  border-radius:999px;
  padding:4px 10px;
  color:#e7e8ec;
}

/* Dot for mobile chip */
.meal-card__meta::before{
  content:"";
  width:6px; height:6px; border-radius:50%;
  background:#9aa0aa; display:inline-block;
}

/* Print-friendly colors for these chips */
@media print{
  #results td > div:nth-of-type(2),
  .meal-card__meta{
    background:#fff !important;
    border:1px solid #bbb !important;
    color:#000 !important;
  }
  #results td > div:nth-of-type(2)::before,
  .meal-card__meta::before{
    background:#666 !important;
  }
}

